# AWS ECS CI/CD Configuration

Este diretório contém as configurações necessárias para o deploy no Amazon ECS.

## 📁 Arquivos

- `task-definition-api.json` - Task definition para a aplicação API (NestJS)
- `task-definition-web.json` - Task definition para a aplicação Web (Next.js)
- `README.md` - Guia completo de configuração

## ⚙️ Configuração

Antes de fazer o primeiro deploy, você precisa:

1. **Substituir placeholders nos arquivos JSON:**
   - `YOUR_ACCOUNT_ID` - ID da sua conta AWS
   - URLs dos repositórios ECR
   - ARNs das IAM roles
   - ARNs dos secrets no Secrets Manager

2. **Ajustar recursos conforme necessário:**
   - `cpu` e `memory` - Capacidade das tasks
   - `desiredCount` - Número de instâncias
   - Variáveis de ambiente
   - Health checks

3. **Registrar as task definitions:**
   ```bash
   aws ecs register-task-definition --cli-input-json file://.aws/task-definition-api.json
   aws ecs register-task-definition --cli-input-json file://.aws/task-definition-web.json
   ```

## 🔄 Atualizações

Quando você fizer mudanças nas task definitions:

1. Edite os arquivos JSON neste diretório
2. Commit e push para o repositório
3. O GitHub Actions irá usar automaticamente as novas definições no próximo deploy

## 📖 Mais Informações

Consulte o [README.md](./README.md) completo para instruções detalhadas de setup.

## ⚠️ Importante

- Nunca commite credenciais ou secrets nestes arquivos
- Use AWS Secrets Manager para dados sensíveis
- Revise as permissões das IAM roles regularmente
- Mantenha os ARNs atualizados após mudanças na infraestrutura
